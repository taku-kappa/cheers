<h1>Posts#show</h1>

<div class="row">
  <div class="col-md-5 offset-md-1 d-flex flex-column align-items-start">
    <%= image_tag @post.user.get_profile_image, :size => '150x150' %>
    <p><%= @post.user.name %></p>
  </div>
</div>

<div class="row">
  <div class="col-md-5 d-flex flex-column align-items-start">
    <h3><%= @post.shop_name %></h3>
    <p><%= @post.address %></p>
  </div>

  <!--Êú¨‰∫∫„Åß„ÅÇ„Çå„Å∞ÊäïÁ®øÁ∑®ÈõÜÂèØËÉΩ-->
  <div class="col-md-7 d-flex flex-column align-items-end">
    <% if @post.user == current_user %>
      <%= link_to "ÊäïÁ®øÁ∑®ÈõÜ", edit_post_path(@post.id) %>
    <% end %>
  </div>
</div>




<table class="table">
  <thead>
    <tr>
      <th></th>
      <th>„É°„Éã„É•„Éº</th>
      <th>ÂÄ§ÊÆµ</th>
      <th>ÁâπÂæ¥</th>
    </tr>
  </thead>
  <tbody>
    <% (1..3).each do |n| %>
      <tr>
        <td><%= image_tag(@post.send("image#{n}").attached? ? @post.send("image#{n}") : 'default-image.jpg', size: "100x100") %></td>
        <td><%= @post.send("menu#{n}_name") %></td>
        <td><%= @post.send("menu#{n}_price") %></td>
        <td><%= @post.send("menu#{n}_description") %></td>
      </tr>
    <% end %>
  </tbody>
</table>


<!--„Ç≥„É°„É≥„ÉàÊäïÁ®ø„Éï„Ç©„Éº„É†-->
<div class="row">
  <div class="col-md-10 d-flex flex-column align-items-start">
    <%= form_with model: [@post, @comment] do |f| %>
      <%= f.text_area :comment, row: '5', placeholder: "„Ç≥„É°„É≥„Éà„Çí„Åì„Åì„Å´" %>
      <%= f.submit "ÈÄÅ‰ø°„Åô„Çã" %>
    <% end %>
  </div>

  <!--„ÅÑ„ÅÑ„Å≠Ê©üËÉΩ-->
  <div class="col-md-2 d-flex flex-column align-items-start">
    <% if @post.favorited_by?(current_user) %>
      <%= link_to post_favorite_path(@post.id), method: :delete, class: "btn btn-danger" do %>
        üëç <%= @post.favorites.count %>„ÅÑ„ÅÑ„Å≠
      <% end %>

    <% else %>
      <%= link_to post_favorite_path(@post.id), method: :post, class: "btn btn-success" do %>
        üëç <%= @post.favorites.count %>„ÅÑ„ÅÑ„Å≠
      <% end %>
    <% end %>
  </div>
</div>



<!--„Ç≥„É°„É≥„Éà‰∏ÄË¶ß-->
<p>„Ç≥„É°„É≥„Éà‰ª∂Êï∞Ôºö<%= @post.post_comments.count %></p>

<div class="row">
  <% @post.post_comments.each do |post_comment| %>
    <div class="col-md-1 mb-5 d-flex align-items-start">
      <%= image_tag post_comment.user.get_profile_image, :size => '80x80' %>
    </div>
    <div class="col-md-3 offset-md-1 mb-5 d-flex align-items-start">
      <%= post_comment.user.name %><%= post_comment.created_at.strftime('%Y/%m/%d') %><br>
      <%= post_comment.comment %>
    </div>

    <div class="col-md-7 mb-5 d-flex align-items-start">
      <% if post_comment.user == current_user %>
        <%= link_to 'ÂâäÈô§', post_post_comment_path(post_comment.post.id, post_comment.id), method: :delete %>
      <% end %>
    </div>


  <% end %>
</div>
