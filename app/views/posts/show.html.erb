<h1 class="text-center my-4">ÊäïÁ®øË©≥Á¥∞</h1>

<div class="container">
  <!-- ÊäïÁ®øËÄÖÊÉÖÂ†± -->
  <div class="row mb-4">
    <div class="col-md-6 d-flex flex-column align-items-start">
      <%= image_tag @post.user.get_profile_image, :size => '150x150', class: "rounded-circle mb-3" %>
      <p class="h5"><%= @post.user.name %></p>
    </div>
  </div>

  <!-- Â∫óËàóÊÉÖÂ†±„Å®Á∑®ÈõÜ„Éú„Çø„É≥ -->
  <div class="row mb-4">
    <div class="col-md-6">
      <h3><%= @post.shop_name %></h3>
      <p><%= @post.address %></p>
    </div>
    <div class="col-md-6 d-flex justify-content-end align-items-center">
      <% if @post.user == current_user %>
        <%= link_to "ÊäïÁ®øÁ∑®ÈõÜ", edit_post_path(@post.id), class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <!-- „É°„Éã„É•„ÉºÊÉÖÂ†± -->
  <table class="table table-bordered">
    <thead class="thead-light">
      <tr>
        <th>ÁîªÂÉè</th>
        <th>„É°„Éã„É•„Éº</th>
        <th>ÂÄ§ÊÆµ</th>
        <th>ÁâπÂæ¥</th>
      </tr>
    </thead>
    <tbody>
      <% (1..3).each do |n| %>
        <tr>
          <td><%= image_tag(@post.send("image#{n}").attached? ? @post.send("image#{n}") : 'default-image.jpg', size: "100x100", class: "img-thumbnail") %></td>
          <td><%= @post.send("menu#{n}_name") %></td>
          <td><%= @post.send("menu#{n}_price") %></td>
          <td><%= @post.send("menu#{n}_description") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- „Ç≥„É°„É≥„ÉàÊäïÁ®ø„Éï„Ç©„Éº„É†„Å®„ÅÑ„ÅÑ„Å≠Ê©üËÉΩ -->
  <div class="row mb-4">
    <div class="col-md-8">
      <%= form_with model: [@post, @comment], local: true do |f| %>
        <div class="form-group">
          <%= f.text_area :comment, rows: '5', class: "form-control", placeholder: "„Ç≥„É°„É≥„Éà„Çí„Åì„Åì„Å´" %>
        </div>
        <%= f.submit "ÈÄÅ‰ø°„Åô„Çã", class: "btn btn-primary" %>
      <% end %>
    </div>

    <div class="col-md-4 d-flex justify-content-start align-items-center">
      <% if @post.favorited_by?(current_user) %>
        <%= link_to post_favorite_path(@post.id), method: :delete, class: "btn btn-danger" do %>
          üëç <%= @post.favorites.count %> „ÅÑ„ÅÑ„Å≠
        <% end %>
      <% else %>
        <%= link_to post_favorite_path(@post.id), method: :post, class: "btn btn-success" do %>
          üëç <%= @post.favorites.count %> „ÅÑ„ÅÑ„Å≠
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- „Ç≥„É°„É≥„Éà‰∏ÄË¶ß -->
  <p class="h5">„Ç≥„É°„É≥„Éà‰ª∂Êï∞Ôºö<%= @post.post_comments.count %></p>

  <div class="row">
    <% @post.post_comments.each do |post_comment| %>
      <div class="col-md-1 mb-4">
        <%= image_tag post_comment.user.get_profile_image, :size => '80x80', class: "rounded-circle" %>
      </div>
      <div class="col-md-8 mb-4">
        <p><strong><%= post_comment.user.name %></strong> <small><%= post_comment.created_at.strftime('%Y/%m/%d') %></small></p>
        <p><%= post_comment.comment %></p>
      </div>
      <div class="col-md-3 mb-4 d-flex justify-content-end">
        <% if post_comment.user == current_user %>
          <%= link_to 'ÂâäÈô§', post_post_comment_path(post_comment.post.id, post_comment.id), method: :delete, class: "btn btn-outline-danger" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
