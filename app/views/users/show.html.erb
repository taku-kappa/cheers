<h1>Users#show</h1>

<!--ユーザー情報部分-->
<div class="row">
  <div class="offset-md-1 d-flex flex-column align-items-start">
    <%= image_tag @user.get_profile_image, :size => '150x150' %>
    <p>
      <%= @user.name %>
      <% if @user == current_user %>
        <%= link_to "編集", edit_user_path(@user.id), class: "btn btn-secondary" %>
      <% else %>
        <% if current_user.following?(@user) %>
          <%= link_to "フォロー解除", user_relationships_path(@user.id), method: :delete, class: "btn btn-danger" %>
        <% else %>
          <%= link_to "フォローする", user_relationships_path(@user.id), method: :post, class: "btn btn-primary" %>
        <% end %>
      <% end %>
    </p>
  </div>

  <!--投稿数-->
  <div class="col-md-2 offset-md-2 d-flex flex-column align-items-center">投稿<p><%= @post_all.count %></p></div>

  <!--フォロー機能-->
    <div class="ccol-md-2 d-flex flex-column align-items-center">フォロワー<p><%= link_to @user.followers.count, user_followers_path(@user.id) %></p></div>
    <div class="col-md-2 d-flex flex-column align-items-center">フォロー中<P><%= link_to @user.followings.count, user_followings_path(@user.id) %></P></div>
</div>


<!--投稿一覧部分-->
<% @posts.each do |post| %>
  <h3>
    <%= link_to post_path(post.id) do %>
      <%= post.shop_name %>
    <% end %>
  </h3>
  <p><%= post.address %></p>


  <table class="table">
    <thead>
      <tr>
        <th></th>
        <th>メニュー</th>
        <th>値段</th>
        <th>特徴</th>
      </tr>
    </thead>
    <tbody>
      <% (1..3).each do |n| %>
        <tr>
          <td><%= image_tag(post.send("image#{n}").attached? ? post.send("image#{n}") : 'default-image.jpg', size: "100x100") %></td>
          <td><%= post.send("menu#{n}_name") %></td>
          <td><%= post.send("menu#{n}_price") %></td>
          <td><%= post.send("menu#{n}_description") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<% end %>


<!--ページネーションの記述-->
<%= paginate @posts %>

